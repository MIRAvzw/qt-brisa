<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <title>Qxt 0.5:QxtPimpl</title>
  <link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="menu">
        <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
            <td align="left" valign="top" width="32">
                <a href="http://www.libqxt.org">
                    <img src="logo.png" align="left" width="32" height="32" border="0" />
                </a>
            </td>
            <td width="1">&nbsp;&nbsp;</td>
            <td class="postheader" valign="center">
                <a href="index.html">Home</a>&nbsp;&middot; 
                <a href="classes.html">All&nbsp;Classes</a>&nbsp;&middot; 
                <a href="modules.html">Modules</a>&nbsp;&middot; 
            </td>

        </tr>
        </table>
    </div>




    <center>
        <h1> 
            QxtPimpl Class Reference<br/>
            <sup><sup>[<a href="group__QxtCore.html">QxtCore</a> module]</sup></sup>
        </h1>
    </center>
    
    
    <p>
        Hide private details of a class. 
        <a href="#details">More...</a>
    </p>
    
    <pre> #include &lt;QxtPimpl&gt;</pre>
    
    
    
    <ul><li><a href="classQxtPimpl-members.html">List of all members, including inherited members</a></li></ul>
    
    <a name="related"></a>
    <h3>related</h3>
    <ul class="sectionlist">
            <li> <a href="classQxtPimpl.html#1e70baf9930ff230cd030697ad6e1ed2e">QXT_DECLARE_PRIVATE</a> </li>
            <li> <a href="classQxtPimpl.html#13b24f59fff4ac3f4bf045fc5840c21c9">QXT_DECLARE_PUBLIC</a> </li>
            <li> <a href="classQxtPimpl.html#1cd3d3fee0ca06d8bd81463ecd5b7d50c">QXT_INIT_PRIVATE</a> </li>
            <li> <a href="classQxtPimpl.html#19a67ea55e3102d9759873297f86aefb5">QXT_D</a> </li>
            <li> <a href="classQxtPimpl.html#129f5f620a2d22bb59d314fa753d91fe9">QXT_P</a> </li>
            <li>QxtPrivate< PUB > & <a href="classQxtPimpl.html#16780f1d0194ebc891614c72b59d5693c">qxt_d</a>  (  ) </li>
            <li>PUB & <a href="classQxtPimpl.html#16b19167222479c38f892a58588b351e7">qxt_p</a>  (  ) </li>
            
    </ul>
    <!--<ul>
        <li><?=inherited_num?> related inherited from <a href="<?=inherited_link?>"><?=inherited_name?></a></li>
    </ul>-->
    
    
    <hr />
    
    <a name="details"></a>
    <h2>Detailed Description</h2>
    <p>
        <p>Application code generally doesn't have to be concerned about hiding its implementation details, but when writing library code it is important to maintain a constant interface, both source and binary. Maintaining a constant source interface is easy enough, but keeping the binary interface constant means moving implementation details into a private class. The PIMPL, or d-pointer, idiom is a common method of implementing this separation. <a class="reflink" href="classQxtPimpl.html">QxtPimpl</a> offers a convenient way to connect the public and private sides of your class.</p>Getting Started<p>Before you declare the public class, you need to make a forward declaration of the private class. The private class must have the same name as the public class, followed by the word Private. For example, a class named MyTest would declare the private class with: <div class="code"><span class="highlight_keyword"  >class </span><span class="highlight_normal"  >MyTestPrivate;</span><br/>
        </div></p>The Public Class<p>Generally, you shouldn't keep any data members in the public class without a good reason. Functions that are part of the public interface should be declared in the public class, and functions that need to be available to subclasses (for calling or overriding) should be in the protected section of the public class. To connect the private class to the public class, include the QXT_DECLARE_PRIVATE macro in the private section of the public class. In the example above, the private class is connected as follows: <div class="code"><span class="highlight_keyword"  >private</span><span class="highlight_normal"  >:</span><br/>
        <span class="highlight_normal"  >    <a class="reflink" href="classQxtPimpl.html#1e70baf9930ff230cd030697ad6e1ed2e">QXT_DECLARE_PRIVATE</a>(MyTest);</span><br/>
        </div></p><p>Additionally, you must include the QXT_INIT_PRIVATE macro in the public class's constructor. Continuing with the MyTest example, your constructor might look like this: <div class="code"><span class="highlight_normal"  >MyTest::MyTest() {</span><br/>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight_normal"  >    </span><span class="highlight_comment"  >// initialization</span><span class="highlight_normal"  ></span><br/>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight_normal"  >    <a class="reflink" href="http://doc.trolltech.com/latest/qxtpimpl.html#8h">QXT_INIT_PRIVATE</a>(MyTest);</span><br/>
        <span class="highlight_normal"  >}</span><br/>
        </div></p>The Private Class<p>As mentioned above, data members should usually be kept in the private class. This allows the memory layout of the private class to change without breaking binary compatibility for the public class. Functions that exist only as implementation details, or functions that need access to private data members, should be implemented here.</p><p>To define the private class, inherit from the template QxtPrivate class, and include the QXT_DECLARE_PUBLIC macro in its public section. The template parameter should be the name of the public class. For example: <div class="code"><span class="highlight_keyword"  >class </span><span class="highlight_normal"  >MyTestPrivate : </span><span class="highlight_keyword"  >public</span><span class="highlight_normal"  > QxtPrivate&lt;MyTest&gt; {</span><br/>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight_normal"  ></span><span class="highlight_keyword"  >public</span><span class="highlight_normal"  >:</span><br/>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight_normal"  >    MyTestPrivate();</span><br/>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight_normal"  >    <a class="reflink" href="classQxtPimpl.html#13b24f59fff4ac3f4bf045fc5840c21c9">QXT_DECLARE_PUBLIC</a>(MyTest);</span><br/>
        <span class="highlight_normal"  >};</span><br/>
        </div></p>Accessing Private Members<p>Use the <a class="reflink" href="classQxtPimpl.html#16780f1d0194ebc891614c72b59d5693c">qxt_d()</a> function (actually a function-like object) from functions in the public class to access the private class. Similarly, functions in the private class can invoke functions in the public class by using the <a class="reflink" href="classQxtPimpl.html#16b19167222479c38f892a58588b351e7">qxt_p()</a> function (this one's actually a function).</p><p>For example, assume that MyTest has methods named getFoobar and doBaz(), and MyTestPrivate has a member named foobar and a method named doQuux(). The code might resemble this example: <div class="code"><span class="highlight_keywordtype"  >int</span><span class="highlight_normal"  > MyTest::getFoobar() {</span><br/>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight_normal"  >    </span><span class="highlight_keywordflow"  >return</span><span class="highlight_normal"  > qxt_d().foobar;</span><br/>
        <span class="highlight_normal"  >}</span><br/>
        <span class="highlight_normal"  ></span><br/>
        <span class="highlight_normal"  ></span><span class="highlight_keywordtype"  >void</span><span class="highlight_normal"  > MyTestPrivate::doQuux() {</span><br/>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight_normal"  >    qxt_p().doBaz(foobar);</span><br/>
        <span class="highlight_normal"  >}</span><br/>
        </div></p>
    </p>
    
    <h2>Member Documentation</h2>
    <h3 class="fn">
        <a name="1e70baf9930ff230cd030697ad6e1ed2e"></a>
         QXT_DECLARE_PRIVATE 
    </h3>
    
    <div class="member">
    
    
        <p class="member_brief">
            <em></em>
        </p>
        <p class="member_desc">
            <p>Declares that a public class has a related private class.</p><p>This shuold be put in the private section of the public class. The parameter is the name of the public class. </p>
        </p>
    
    </div>
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant --><h3 class="fn">
        <a name="13b24f59fff4ac3f4bf045fc5840c21c9"></a>
         QXT_DECLARE_PUBLIC 
    </h3>
    
    <div class="member">
    
    
        <p class="member_brief">
            <em></em>
        </p>
        <p class="member_desc">
            <p>Declares that a private class has a related public class.</p><p>This may be put anywhere in the declaration of the private class. The parameter is the name of the public class. </p>
        </p>
    
    </div>
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant --><h3 class="fn">
        <a name="1cd3d3fee0ca06d8bd81463ecd5b7d50c"></a>
         QXT_INIT_PRIVATE 
    </h3>
    
    <div class="member">
    
    
        <p class="member_brief">
            <em></em>
        </p>
        <p class="member_desc">
            <p>Initializes resources owned by the private class.</p><p>This should be called from the public class's constructor, before <a class="reflink" href="classQxtPimpl.html#16780f1d0194ebc891614c72b59d5693c">qxt_d()</a> is used for the first time. The parameter is the name of the public class. </p>
        </p>
    
    </div>
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant --><h3 class="fn">
        <a name="19a67ea55e3102d9759873297f86aefb5"></a>
         QXT_D 
    </h3>
    
    <div class="member">
    
    
        <p class="member_brief">
            <em></em>
        </p>
        <p class="member_desc">
            <p>Returns a reference in the current scope named "d" to the private class.</p><p>This function is only available in a class using <em>QXT_DECLARE_PRIVATE</em>. </p>
        </p>
    
    </div>
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant --><h3 class="fn">
        <a name="129f5f620a2d22bb59d314fa753d91fe9"></a>
         QXT_P 
    </h3>
    
    <div class="member">
    
    
        <p class="member_brief">
            <em></em>
        </p>
        <p class="member_desc">
            <p>Creates a reference in the current scope named "q" to the public class.</p><p>This macro only works in a class using <em>QXT_DECLARE_PUBLIC</em>. </p>
        </p>
    
    </div>
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant --><h3 class="fn">
        <a name="16780f1d0194ebc891614c72b59d5693c"></a>
        QxtPrivate< PUB > & qxt_d  (  ) 
    </h3>
    
    <div class="member">
    
    
        <p class="member_brief">
            <em></em>
        </p>
        <p class="member_desc">
            <p>Returns a reference to the private class.</p><p>This function is only available in a class using <em>QXT_DECLARE_PRIVATE</em>.</p><p>Returns a const reference to the private class.</p><p>This function is only available in a class using <em>QXT_DECLARE_PRIVATE</em>. This overload will be automatically used in const functions. </p>
        </p>
    
    </div>
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant --><h3 class="fn">
        <a name="16b19167222479c38f892a58588b351e7"></a>
        PUB & qxt_p  (  ) 
    </h3>
    
    <div class="member">
    
    
        <p class="member_brief">
            <em></em>
        </p>
        <p class="member_desc">
            <p>Returns a reference to the public class.</p><p>This function is only available in a class using <em>QXT_DECLARE_PUBLIC</em>.</p><p>Returns a const reference to the public class.</p><p>This function is only available in a class using <em>QXT_DECLARE_PUBLIC</em>. This overload will be automatically used in const functions. </p>
        </p>
    
    </div>
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant -->
    <br/> <!--  i hate assistant -->
    



    <br/>
    <hr />
    <div align="center">
        <table width="100%" cellspacing="0" border="0">
            <tr class="address">
                <td width="30%">Copyright &copy; 2007 <a href="http://libqxt.org">Qxt Foundation</a></td>
                <td width="40%" align="center"><a href="http://doc.trolltech.com/latest/trademarks.html">Trademarks </a></td>
                <td width="30%" align="right"><div align="right">Qt Extension Library 0.5</div></td>
            </tr>
        </table>
    </div>

</body>
</html>
